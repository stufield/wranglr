---
title: "Get Umbrella Annotations"
output:
  rmarkdown::html_vignette:
    fig_caption: yes
vignette: >
  %\VignetteIndexEntry{Get Umbrella Annotations}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
library(splyr)
knitr::opts_chunk$set(
  collapse = TRUE, 
  comment = "#>",
  message = FALSE,
  warning = FALSE
)
```



The analyte-specific 'metadata', aka "annotations", changes semi-regularly.
The `getAnnotations()` function returns a static object of Umbrella's
annotations that is updated on an irregular interval.
This API version, `getAnnotationsAPI()`, hits an Umbrella API endpoint
and requests the _latest_ annotations as they exist in Umbrella's database.
As such, it is dynamic and should not be expected to return a stable
set of annotations (by design).


---------------------


## Useful functions associated Analyte-annotations:

* `getAnnotations()`:
returns _static_ analyte metadata (annotations) from Umbrella at a previous
point in time, usually 6-12 months.

* `getAnnotationsAPI()`:
returns _dynamic_ analyte metadata (annotations) contained in Umbrella.
If it cannot reach Umbrella's API, the static table object obtained
from `getAnnotations()` is returned.

* `seqify()`:
This generates _non-SeqId_ information from `SeqIds`. So, given a list of 
`SeqIds`, it returns the `EntrezGeneSymbol` and the `Target` information. 
It does not generate `SeqIds`.

* `lookupAnnotations()`:
Looks for pattern matches in the annotations. These can be in the 
EntrezGeneSymbol, the Target, the `SeqId`, or the list 
(options in list are "black", "gray", and "" for the white list). 
Returns rows that have a match in _any_ of these columns.

* `seqLookup()`:
Looks up the target and gene symbol associated with a `seqId`;
not the `seqId` associated with a gene symbol. That is, given a list of 
SeqIds (which are formatted number-number), return the `EntrezGeneSymbol`
and `Target`.



----------------------


### `SeqIds` by regular expression

If you want to look for other information about the aptamers, you can 
search for particular patterns within any of the other columns as well.
Say for some reason you know you want all the entries with 
`999` in them _in any column_. Do this:

```{r seq999}
seq999 <- lookupAnnotations("999")
```

Resulting in:

```{r seq999-2}
seq999
```

**Note:** the `999` can be anywhere in the name, not just at the beginning.

